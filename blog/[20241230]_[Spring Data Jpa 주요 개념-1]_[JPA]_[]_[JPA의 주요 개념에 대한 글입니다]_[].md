# JPA (Java Persistence API)

JPA는 Java 진영에서 **ORM (Object-Relational Mapping)** 기술 표준으로 사용하는 **인터페이스 모음**입니다.  
자바 객체를 테이블 데이터와 매핑하고 영속화하는 데 필요한 인터페이스들의 집합입니다.

---

## ORM이란?
**ORM (Object-Relational Mapping)**은 클래스 객체와 RDB (Relational Database) 테이블을 자동으로 매핑해 주고, 객체 데이터를 영속화(Persistence)하는 기술입니다.  
RDB 테이블은 자바 객체가 아니기 때문에 Java에서는 ORM을 통해 객체와 테이블 간의 매핑 작업을 수행해야 합니다.  

### ORM 없이 작업할 경우
- 직접 설정하고 작업해야 하므로 코드의 길이가 증가하고 복잡도가 크게 증가합니다.

---

## ORM의 사용 효과
1. **추상화**
   - 추상 계층을 제공하여 객체를 테이블 형태로 변환
   - SQL문 없이도 개발 가능

2. **생산성 증가**
   - 반복되는 CRUD 코드 감소
   - 개발 속도 향상

3. **유지보수 용이**
   - 데이터베이스 시스템 변경에 유연하게 대처 가능
   - 데이터 접근 중심의 로직으로 ERD 의존도가 낮아져 유지보수 용이

4. **보안성 향상**
   - SQL 인젝션, 쿼리 조작 등의 보안 문제에서 자유로움

---

## JPA와 구현체
- JPA는 **인터페이스 모음**만으로는 작동하지 않습니다.
- 구현체가 필요하며, 대표적인 구현체로는 **Hibernate**가 있습니다.
  - Hibernate는 JPA 인터페이스를 구현하여 실제 DB와 연결해 동작합니다.
  - [Hibernate 공식 문서](https://docs.jboss.org/hibernate/orm/6.4/userguide/html_single/Hibernate_User_Guide.html#architecture-overview)

---

## JPA의 주요 개념

### 엔티티 (Entity)
- DB에 영속적으로 저장된 데이터를 자바 객체로 매핑한 것
- **인스턴스 형태로 존재**하는 데이터

### 엔티티 매니저 (Entity Manager)
- 엔티티를 관리하는 객체
- 영속성 컨텍스트와의 인터페이스 역할

### 영속성 컨텍스트 (Persistence Context)
- 엔티티를 영구 저장하는 환경
- 일반적으로 하나의 엔티티 매니저는 하나의 영속성 컨텍스트를 관리함

---

## 엔티티의 라이프사이클
1. **비영속 상태 (Transient)**
   - 엔티티가 영속성 컨텍스트와 연결되지 않은 상태
   - 아직 DB에 저장되지 않음

2. **영속 상태 (Persistent)**
   - 엔티티가 영속성 컨텍스트에 저장되어 관리되는 상태
   - 엔티티가 DB와 동기화됨

3. **준영속 상태 (Detached)**
   - 영속성 컨텍스트에서 분리된 상태
   - **ID가 반드시 존재**하며, 데이터를 더 이상 영속성 컨텍스트에서 관리하지 않음

4. **삭제 상태 (Removed)**
   - 엔티티가 영속성 컨텍스트에서 제거된 상태
   - DB에서도 삭제 예정 상태

---

## 엔티티 상태 요약

| 상태           | 특징                                    |
|----------------|-----------------------------------------|
| 비영속 (Transient) | 영속성 컨텍스트와 연관되지 않음, DB 저장 X |
| 영속 (Persistent)  | 영속성 컨텍스트에서 관리, DB와 동기화    |
| 준영속 (Detached)   | 영속성 컨텍스트와 분리, ID는 반드시 존재  |
| 삭제 (Removed)      | 영속성 컨텍스트와 DB에서 제거 예정        |
